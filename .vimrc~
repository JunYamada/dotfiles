" vimのバージョンが7以下は.vimrcを読み込まない
" MacOSデフォvim対応
:if version < 701
    :finish
:endif




" Ev/Rvでvimrcの編集と反映
command! Ev edit $MYVIMRC
command! Rv source $MYVIMRC


" Lion以前のフルスクリーンに戻す場合は以下のコマンドを実行
" defaUlts write org.vim.MacVim MMNativeFullScreen 0
if has("gui_macvim")
  set fuoptions=maxvert,maxhorz
  au GUIEnter * set fullscreen
endif



"-------------------------------------------------------------------------------
" 基本設定 Basics
"-------------------------------------------------------------------------------
" カーソル行を画面中央にする
set scrolloff=999
" バックアップファイルを作らない
set nobackup
set autoread " 他で書き換えられたら自動で読み直す
" スワップファイルを作成しない
set noswapfile
set hidden                       " 編集中でも他のファイルを開けるようにする
set backspace=indent,eol,start   " バックスペースでなんでも消せるように
set formatoptions=lmoq           " テキスト整形オプション，マルチバイト系を追加
set vb t_vb=                     " ビープをならさない
set whichwrap=b,s,h,l,<,>,[,]    " カーソルを行頭、行末で止まらないようにする
set showcmd                      " コマンドをステータス行に表示
set showmode                     " 現在のモードを表示
set modelines=0                  " モードラインは無効


" OSのクリップボードを使用する
set clipboard+=unnamed

"ヤンクした文字は、システムのクリップボードに入れる"
set clipboard=unnamed


set helpfile=$VIMRUNTIME/doc/help.txt

" ファイルタイプ判定をon
filetype plugin on




"----------------------------------------------------
" インデント・タブ
" via@https://github.com/cosmo0920/vim-emacs_Setting/tree/master/vimrc
"----------------------------------------------------
" オートインデントを有効にする
" via@http://nanasi.jp/articles/howto/note/top10-viuser-need-to-know-about-vim.html#cindent
	set cindent
" タブの空白の数
" via@http://ogawa.s18.xrea.com/fswiki/wiki.cgi?page=Vim%A4%CE%A5%E1%A5%E2
set tabstop=4
" tab押下時のカーソル移動幅
set softtabstop=4
" 自動インデント幅
set shiftwidth=4
"強調表示(色付け)のON/OFF設定
if has("syntax")
	syntax on
endif
if has('win32')
" ウィンドウの幅より長い行は折り返して、次の行に続けて表示する
set wrap
" 見えない文字の表示
" via@http://d.hatena.ne.jp/potappo2/20061107/1162862536
set list
set listchars=tab:>-,trail:-,nbsp:%,extends:>,precedes:<
endif

"------------------------------------------------
"エディタの動作
" via@https://github.com/cosmo0920/vim-emacs_Setting/tree/master/vimrc
"------------------------------------------------
" 行番号を表示する
set number

if has('win32')
" 括弧入力時の対応する括弧を表示
set showmatch
"新しい行を作ったときに高度な自動インデントを行う
set smartindent
"検索時に大文字を含んでいたら大/小を区別
set smartcase
" 検索がファイル末尾まで進んだら、ファイル先頭から再び検索する。（有効:wrapscan/無効:nowrapscan）
set wrapscan
" カーソルが何行目の何列目に置かれているかを表示する。（有効:ruler/無効:noruler）
set ruler
" IMEがonの場合はカーソルを赤くする
" http://www.e2esound.com/wp/2010/11/07/add_vimrc_settings/
hi CursorIM  guifg=black  guibg=red  gui=NONE  ctermfg=black  ctermbg=white  cterm=reverse
" 検索時に大文字・小文字を区別しない
set ignorecase
" via@http://vimwiki.net/?'guioptions'
" バックスペースでindent無視 & 改行超えてバックスペース許可
set guioptions=indent,eol
" fullscreen
" via@http://nanabit.net/blog/2007/11/01/vim-fullscreen/
"-----------------------------------------------------------
nnoremap <F11> :call ToggleFullScreen()<CR>
function! ToggleFullScreen()
  if &guioptions =~# 'C'
    set guioptions-=C
    if exists('s:go_temp')
      if s:go_temp =~# 'm'
        set guioptions+=m
      endif
      if s:go_temp =~# 'T'
        set guioptions+=T
      endif
    endif
    simalt ~r
  else
    let s:go_temp = &guioptions
    set guioptions+=C
    set guioptions-=m
    set guioptions-=T
    simalt ~x
  endif
endfunction
set guioptions-=T
set guioptions-=m
set guioptions-=r
set guioptions-=R
set guioptions-=l
set guioptions-=L
set guioptions-=b

" スムーズスクロール
:map <C-U> <C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y>
:map <C-D> <C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E><C-E>

" htmlファイル作成時、templateを読み込む
" autocmd BufNewFile *.html 0r ~/.vim/templates/skel.html
augroup SkeletonAu
    autocmd!
    autocmd BufNewFile *.html 0r $HOME/dotfiles/.vim/templates/skel.html
augroup END
endif

"------------------------------------------------
" NeoBundle
"------------------------------------------------
set nocompatible
filetype off

if has('vim_starting')
  if &runtimepath !~ '/neobundle.vim'
    execute 'set runtimepath+=' . expand('~/dotfiles/.vim/bundle/neobundle.vim')
  endif
endif
call neobundle#rc(expand('~/dotfiles/.vim/bundle/'))

" plugins
NeoBundle 'scrooloose/nerdtree'
NeoBundle 'Lokaltog/vim-powerline'
NeoBundle 'vim-scripts/taglist.vim'
NeoBundle 'mattn/zencoding-vim'
NeoBundle 'Shougo/neocomplcache'
NeoBundle 'Shougo/unite.vim'

filetype plugin indent on

if neobundle#exists_not_installed_bundles()
   echomsg 'Not installed bundles : ' .
         \ string(neobundle#get_not_installed_bundle_names())
   echomsg 'Please execute ":NeoBundleInstall" command.'
   "finish
endif




"------------------------------------------------
" Plugin 設定
"------------------------------------------------

""" unite.vim
" バッファ一覧
nnoremap <silent> ,ub :<C-u>Unite buffer<CR>
" レジスタ一覧
nnoremap <silent> ,ur :<C-u>Unite -buffer-name=register register<CR>
" 最近使用したファイル一覧
nnoremap <silent> ,um :<C-u>Unite file_mru<CR>
" 常用セット
nnoremap <silent> ,uu :<C-u>Unite buffer file_mru<CR>
" 全部乗せ
nnoremap <silent> ,ua :<C-u>UniteWithBufferDir -buffer-name=files buffer file_mru bookmark file<CR>


" neocomplcache
" code補完を表示する
" https://github.com/Shougo/neocomplcache
let g:neocomplcache_enable_at_startup = 1


" taglist.vim
let Tlist_Show_One_File = 1
let Tlist_Use_Right_Window = 1
let Tlist_Exit_OnlyWindow = 1
" F8にtaglistのtoggleを割り当て
nnoremap <silent> <F8> :TlistToggle<CR>


" NERD-Tree
" 引数なし起動時はTree表示 (BookmarkのUserを初回に表示
" http://kokukuma.blogspot.jp/2011/12/vim-essential-plugin-nerdtree.html
let file_name = expand("%")
if has('vim_starting') &&  file_name == ""
    autocmd VimEnter * NERDTree User
endif
" 横幅
let NERDTreeWinSize = 40


